---
title: 3-3. 指令
date: 2023-04-22
---

## 指令：Directives

![3-3-1](/img/vue/vue/3-3-1.png)

#### 1. 概述
- 指令是带有 v- 前缀的特殊 attribute，Vue 提供了许多内置指令
- 指令 attribute 的期望值为一个 JavaScript 表达式 (v-for 是例外情况)
- 指令的职责是，当表达式的值改变时，将其产生的连带影响，响应式地作用于 DOM

#### 2. 参数:Arguments
一些指令能够接收一个“参数”，在指令名称之后以冒号表示。

**示例**  
v-bind 指令可以用于响应式地更新 HTML attribute：  
```vue
<!--href 是参数，告知 v-bind 指令将该元素的 href属性与表达式 url 的值绑定-->
<a v-bind:href="url">...</a>
```

#### 3. 动态参数
在指令参数上也可以使用一个 JavaScript 表达式，需要包含在一对方括号内：
```vue
<a v-bind:[attributeName]="url"> ... </a>
```
这里的attrbuteName会被作为一个JS表达式动态值，取得的值会作为最终的参数来使用。  

例如：组件实例有一个数据属性attributeName，值为"href",那么这个绑定就==v-bind:href。

**语法限制**

- 动态参数值的限制：动态参数预期会求出一个字符串，异常情况下值为 null。这个特殊的 null 值可以被显性地用于移除绑定。
任何其它非字符串类型的值都将会触发一个警告。
- 动态参数语法的限制：空格和引号放在HTML attribute名里是无效的，会触发警告，所以在使用时，不要加空格和引号的表达式。
    - 推荐：计算属性替代复杂的表达式。
- 大小写：在 DOM 中使用模板时 (直接在一个 HTML 文件里撰写模板)，还需要避免使用大写字符来命名键名，因为浏览器会把 attribute 名全部强制转为小写。尽量用连接符而不是驼峰命名法。

#### 4. 修饰符：Modifiers
修饰符（modifier）是 "." 指明的特殊后缀，用于指出一个指令应该以特殊方式绑定。     
例：.prevent 修饰符告诉 v-on 指令对于触发的事件调用 event.preventDefault()：

#### 5. 缩写
Vue 为 v-bind 和 v-on 这两个最常用的指令，提供了特定简写。
##### 5.1 v-bind绑定
```vue
<a v-bind:href="url">...</a> //完整语法
<a :href="url">...</a> //缩写语法
<a :[key]="url">...</a> //动态参数缩写
```
##### 5.2 v-on绑定
```vue
<a v-on:click="doSomething">...</a> //完整语法
<a @click="doSomething">...</a> //缩写
<a @[event]="doSomething"> ... </a> //动态参数的缩写 
```
