---
title: 3-1. 作用域
date: 2023-05-12
---
#### 1. 概念
作用域指一个变量的作用范围。在JS中一共有两种作用域，全局作用域和函数作用域。
- 全局作用域：直接写在JS标签中的JS代码，就是全局作用域。
- 函数作用域：函数中的作用域。

#### 2. 全局作用域
在页面打开时创建，在页面关闭时销毁。
##### 2.1 window对象
在全局作用域中，有一个全局对象window，可以直接使用，他代表的是浏览器的窗口，由浏览器创建。在全局作用域中，创建的变量，都会作为window对象的属性保存。

创建的函数都会作为window对象的方法（函数其实就是window对象的方法）。

##### 2.2 变量的声明提前
使用var关键字声明的变量，会在所有的代码执行前声明，如果不使用var关键字，则变量不会被声明提前。
```js
console.log(a); //保存，a不存在，报错
a = 123 ; 

console.log(a); //undefined
var a =123; //相当于，在JS头部声明了var a,在这里又进行了赋值 a = 123;
```

##### 2.3 函数的声明提前
使用函数声明形式创建的函数，他会在所有的代码执行之前就被创建。所以可以在函数声明前进行调用。使用函数表达式创建的函数，不会被声明提前，所以不能在声明前调用。
```js
function fun(){}
var fun2 = function(){}
```
##### 2.4 全局变量
全局作用域的变量都是全局变量，在页面的任何位置都可以访问。

#### 3. 函数作用域
##### 3.1 函数作用域的创建
调用函数时，创建函数作用域，函数执行完毕后，函数作用域销毁。

每调用一次函数就会创建一个新的函数作用域，他们之间互相独立。
##### 3.2 访问
在函数作用域中可以访问到全局作用域变量。在全局作用域中你无法访问到函数作用域的变量。在函数中要访问全局变量（被覆盖的）可以使用windows对象。
##### 3.3 作用域链
在函数作用域中操作一个变量时，他会在自身作用域中寻找，如果有就直接使用，如果没有就向上一级作用域中寻找，直到找到全局作用域，如果依然没找到，就报错。
##### 3.4 声明提前
在函数作用域中，也有声明提前的特性，使用var关键字声明的变量，会在函数中所有的代码执行之前被声明，函数声明也会在函数中所有的代码执行之前执行。
##### 3.5 全局变量
在函数中，不使用var声明的变量都会成为全局变量
```js
var a = 10 ;
function fun(){
    console.log(a);
    a = 100;
}
fun();//输出10；
console.log(a);//输出100
```
##### 3.6 形参
定义形参，相当于在函数中声明了变量。

#### 4. 作用域与执行上下文
- 作用域: 静态的, 编码时就确定了(不是在运行时), 一旦确定就不会变化了
- 执行上下文: 动态的, 执行代码时动态创建, 当执行结束消失
- 联系: 执行上下文环境是在对应的作用域中的

#### 5. 作用域链
多个嵌套的作用域形成的由内向外的结构, 用于查找变量

如果在当前作用域中没有查到值，就会向上级作用域去查，直到查到全局作用域，这么一个查找过程形成的链条就叫做作用域链。











