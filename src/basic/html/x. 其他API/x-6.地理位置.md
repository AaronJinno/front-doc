---
title: x-6. 地理位置
date: 2023-04-20
---
:::tip
H5新增Geolocation API 来作为地理位置的应用接口。

该API在大部分浏览器中子支持https通信。

该API一般应用于移动端，且该设备可以进行定位。

仅做基本了解，具体API更新较快，暂略。
:::

## Ⅰ. 地理位置基础
#### 1. Geolocation使用方法
请求一个地理位置信息，如果用户同意，浏览器就会返回位置信息，该位置信息是通过支持HTML5地理定位功能的底层设备（手机等）提供给浏览器的，位置信息由经纬度坐标和一些其他元数据组成。

#### 2. Geolocation应用场景
- 提供周边商务信息
- 运动信息
- 导航信息
- 交友等位置信息。

#### 3. 位置信息的表达方式
位置信息主要由经纬度坐标组成，如：
```txt
Latitude:39.18333,longitude:-120.12334
```
- Latitude是维度，longitude是经度。
- 数据有两种格式，上面的是十进制格式，该API返回的数据是十进制格式。
- 位置信息还包括：位置准确度、海拔、海拔准确度、行驶方向、速度等。取决于设备和浏览器，如果这些元数据不存在，则返回null。


#### 4. 位置信息来源
Geolocation API不指定位置信息的来源，只用于检索信息，设备可以使用下列数据
- IP地址；
- 三维坐标：GPS、RFID、Wi-Fi、和蓝牙的MAC地址
- 用户自定义数据：GSM、CDMA手机的ID。

#### 5. IP定位
自动查询用户的IP地址，然后检索其注册的物理地址，如果用户的IP地址是ISP提供的，其位置往往就由服务供应商的物理地址决定，该地址举例用户数千米。（用作判断用户所在城市是可以的）。
- 优点：任何地方都可用、在服务器端处理
- 缺点：不精确（城市级）、运算代价大，易出错。
- 用途：根据IP地址进行推广。

#### 6. GPS定位
比较精确的定位，一般要通过异步处理。
比较耗电、需要硬件支持。

#### 7. Wi-Fi定位
通过用户当前位置到已知的多个Wi-Fi介入点的距离来进行定位。  
比较精确且能在室内使用，前提是有WiFi。

#### 8. 手机定位
基于手机的地理定位信息是通过计算用户到一些基站三角定位确定的。

#### 9. 自定义定位
除了计算用户位置外，允许用户自定义其位置，手动输入。   
可以配合自动定位使用。比如外卖地址。
