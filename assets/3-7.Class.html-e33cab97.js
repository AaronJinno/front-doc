import{_ as n,o as s,c as a,e as p}from"./app-8888c5c9.js";const t={},e=p(`<h2 id="i-class-类" tabindex="-1"><a class="header-anchor" href="#i-class-类" aria-hidden="true">#</a> Ⅰ. class 类</h2><p>本质：class只是个语法糖。</p><h4 id="_1-介绍" tabindex="-1"><a class="header-anchor" href="#_1-介绍" aria-hidden="true">#</a> 1. 介绍</h4><p>ES6 提供了更接近传统语言的写法，引入了 Class（类）这个概念，作为对象的模板。通过 class 关键字，可以定义类。基本上，ES6 的 class 可以看作只是一个语法糖，它的绝大部分功能，ES5 都可以做到，新的 class 写法只是让对象原型的写法更加清晰、更像面向对象编程的语法而已</p><h4 id="_2-es5类的使用" tabindex="-1"><a class="header-anchor" href="#_2-es5类的使用" aria-hidden="true">#</a> 2. ES5类的使用</h4><p>通过构造函数实例化对象，这个构造函数可以理解为ES5的类。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Phone</span><span class="token punctuation">(</span><span class="token parameter">brand<span class="token punctuation">,</span>price</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>brand <span class="token operator">=</span> brand<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price
<span class="token punctuation">}</span>
<span class="token comment">//添加方法：向原型中添加</span>
<span class="token class-name">Phone</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">call</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;打电话&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//实例化对象</span>
<span class="token keyword">let</span> iphone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token string">&#39;ipone&#39;</span><span class="token punctuation">,</span><span class="token number">2323</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">iphone</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-es6的class" tabindex="-1"><a class="header-anchor" href="#_3-es6的class" aria-hidden="true">#</a> 3. ES6的class</h4><p>ES6可以通过class创建类，并实例化类创建对象。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Phone</span><span class="token punctuation">{</span>
    say <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span> <span class="token comment">//属性，必须是=号，不能是：</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">brand<span class="token punctuation">,</span>price</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//构造函数，用来初始化对象</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>brand <span class="token operator">=</span> brand<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token comment">//属性（方法）之间不要加逗号，否则就报错</span>

    <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//方法，必须是该格式，不能加：function</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;打电话&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//实例化</span>
<span class="token keyword">let</span> Fox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token string">&quot;Fox&quot;</span><span class="token punctuation">,</span><span class="token number">2323</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-class基本语法" tabindex="-1"><a class="header-anchor" href="#_4-class基本语法" aria-hidden="true">#</a> 4. class基本语法</h4><ul><li>class 类名{...}；定义一个类</li><li>属性：必须是等于(=)号赋值，不能是：</li><li>方法：必须是fun()方式，不能加function</li><li>属性（方法）直接不要加逗号，否则就会报错</li><li>class类初始化对象是在construct（构造函数）方法中进行的。</li><li>实例化：同ES5，使用new进行实例化，实例化时传递的参数会传给class中的construct</li><li>类的内部所有定义的方法，都是不可枚举的</li></ul><h4 id="_5-class与prototype" tabindex="-1"><a class="header-anchor" href="#_5-class与prototype" aria-hidden="true">#</a> 5. class与prototype</h4><p>在类的实例上面调用方法，其实就是调用原型上的方法</p><p>类的方法都定义在prototype对象上面,类的新方法可以添加在prototype对象上面。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
    <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//等同于</span>
<span class="token class-name">A</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span>constructor <span class="token operator">===</span> <span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> <span class="token constant">A</span>
<span class="token comment">//由于类的方法都定义在prototype上，可用Object.assign方法向类添加方法</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-类的实例" tabindex="-1"><a class="header-anchor" href="#_6-类的实例" aria-hidden="true">#</a> 6. 类的实例</h4><p>与 ES5 一样，实例的属性除非显式定义在其本身（即定义在this对象上），否则都是定义在原型上（即定义在class上）。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&#39;say&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false，对象a没有该属性</span>
a<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a可以调用该属性</span>
a<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&#39;say&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true,该属性属于a的构造函数</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>与 ES5 一样，类的所有实例共享一个原型对象。因此可以通过实例的__proto__属性为类添加方法。不推荐使用，这会改变类的原始定义，影响到所有实例。</p><h2 id="ii-class的元素" tabindex="-1"><a class="header-anchor" href="#ii-class的元素" aria-hidden="true">#</a> Ⅱ. class的元素</h2><h4 id="_1-construct方法" tabindex="-1"><a class="header-anchor" href="#_1-construct方法" aria-hidden="true">#</a> 1. construct方法</h4><p>constructor()方法是类的默认方法（构造函数），通过new命令生成对象实例时，自动调用该方法。一个类必须有constructor()方法，如果没有显式定义，一个空的constructor()方法会被默认添加。构造函数一般用来初始化属性，构造函数里的this就代表实例对象。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token comment">// 等同于</span>
<span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>constructor()方法默认返回实例对象（即this），完全可以指定返回另外一个对象。</li><li>类必须使用new调用，否则会报错。这是它跟普通构造函数的一个主要区别</li></ul><h4 id="_2-getter和setter" tabindex="-1"><a class="header-anchor" href="#_2-getter和setter" aria-hidden="true">#</a> 2. getter和setter</h4><p>与ES5是一样的。</p><ul><li>getter：取值函数，对动态属性进行封装</li><li>setter：存值函数，对设置的属性进行验证</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Phone</span><span class="token punctuation">{</span>
    realPrice <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">get</span> <span class="token function">price</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;读取架价格属性&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>realPrice<span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">set</span> <span class="token function">price</span><span class="token punctuation">(</span><span class="token parameter">newPrice</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;设置价格属性了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>newPrice<span class="token operator">&gt;</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>realPrice <span class="token operator">=</span> newPrice<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>realPrice <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span> 
s<span class="token punctuation">.</span>price<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-表达式" tabindex="-1"><a class="header-anchor" href="#_3-表达式" aria-hidden="true">#</a> 3. 表达式</h4><h5 id="_3-1-属性表达式" tabindex="-1"><a class="header-anchor" href="#_3-1-属性表达式" aria-hidden="true">#</a> 3.1 属性表达式</h5><p>类的属性名，可以采用表达式</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> methodName <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{</span>
    <span class="token punctuation">[</span>methodName<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-2-class表达式" tabindex="-1"><a class="header-anchor" href="#_3-2-class表达式" aria-hidden="true">#</a> 3.2 Class表达式</h5><p>与函数一样，类也可以使用表达式的形式定义。</p><p>如下：定义了一个类，类名是A，但A只能在Class内部使用，指代当前类（==this），在Class外部，这个类只能用MyClass。如果累的内部没用到A的话，也可以省略A</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> MyClass <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{</span>
    <span class="token function">getClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token constant">A</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//省略A</span>
<span class="token keyword">const</span> MyClass <span class="token operator">=</span> <span class="token keyword">class</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这种表达式写法，可以写出立即执行的Class</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">class</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token string">&#39;jinno&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//定义后就直接执行，对象名就是变量</span>
p<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//p就是立即执行类的实例</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-class的注意事项" tabindex="-1"><a class="header-anchor" href="#_4-class的注意事项" aria-hidden="true">#</a> 4. class的注意事项</h4><ul><li>严格模式: 类和模块的内部，默认就是严格模式，所以不需要使用use strict指定运行模式。 <ul><li>ES6 实际上把整个语言升级到了严格模式。</li></ul></li><li>不存在提升: 类不存在变量提升（hoist），这一点与 ES5 完全不同，即类必须先定义，才能实例化，不然会报错（主要是为了继承的原因，必须保证子类在父类之后定义）。</li><li>name属性: name属性总是返回紧跟在class关键字后面的类名 <ul><li><code>class A{...}</code> <code> A.name;//A</code></li></ul></li><li>Generator方法: 如果某个方法之前加上星号（*），就表示该方法是一个 Generator 函数。</li><li>this的指向: 类的方法内部如果含有this，它默认指向类的实例。 <ul><li>一旦单独使用该方法，很可能报错，因为单独使用该方法时this会指向该方法运行时所在的环境（这时会变成undefined），从而因为找不到this执行的方法而报错。尽量别单独用就好了。</li></ul></li></ul><h4 id="_5-静态成员" tabindex="-1"><a class="header-anchor" href="#_5-静态成员" aria-hidden="true">#</a> 5. 静态成员</h4><p>属于类（构造函数）的，不属于实例的成员，我们称之为：静态成员。</p><h5 id="_5-1-静态方法" tabindex="-1"><a class="header-anchor" href="#_5-1-静态方法" aria-hidden="true">#</a> 5.1 静态方法</h5><p>如果在一个方法前，加上static关键字，就表示该方法不会被实例继承，而是直接通过类来调用，这就称为“静态方法”（静态方法只能通过类来调用）。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;静态方法-m&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//TypeError:a.m is not a function</span>
<span class="token constant">A</span><span class="token punctuation">.</span><span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//hello,类可以直接调用，也只有类能调用</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果静态方法包含this，this指向的是类，而不是实例</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;static-say&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;say&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token constant">A</span><span class="token punctuation">.</span><span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//static-say</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>如上，静态方法可以和非静态方法重名</li><li>父类的静态方法可以被子类继承，静态方法也是可以从super对象上调用的</li></ul><h5 id="_5-2-静态属性" tabindex="-1"><a class="header-anchor" href="#_5-2-静态属性" aria-hidden="true">#</a> 5.2 静态属性</h5><p>静态属性指的是 Class 本身的属性，而不是定义在示例对象（this）上的属性</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{</span>
    <span class="token keyword">static</span> age <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-new-target-属性" tabindex="-1"><a class="header-anchor" href="#_6-new-target-属性" aria-hidden="true">#</a> 6. new.target 属性</h4><p>target属性是new命令的属性，该属性一般用在构造函数之中，返回new命令作用于的那个构造函数。如果构造函数不是通过new命令或Reflect.construct()调用的，new.target会返回undefined，因此这个属性可以用来确定构造函数是怎么调用的。</p><h5 id="_6-1-通过target限制构造函数只能通过new调用" tabindex="-1"><a class="header-anchor" href="#_6-1-通过target限制构造函数只能通过new调用" aria-hidden="true">#</a> 6.1 通过target限制构造函数只能通过new调用</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">.</span>target <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;必须使用new命令生成实例&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_6-2-class内部调用new-target-返回当前class" tabindex="-1"><a class="header-anchor" href="#_6-2-class内部调用new-target-返回当前class" aria-hidden="true">#</a> 6.2 class内部调用new.target，返回当前Class</h5><p>需要注意的是，子类继承父类时，new.target会返回子类。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>Class <span class="token constant">A</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">.</span>target <span class="token operator">===</span> <span class="token constant">A</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>用途：利用这个特点，可以写出不能独立使用、必须继承后才能使用的类。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">.</span>target <span class="token operator">===</span> <span class="token constant">A</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token string">&#39;本类不能实例化&#39;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">B</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//调用父类的构造函数</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-类的遍历" tabindex="-1"><a class="header-anchor" href="#_7-类的遍历" aria-hidden="true">#</a> 7. 类的遍历</h4><p>类与对象不同，其中的很多key是无法枚举的，要想完整枚举一个类，需要枚举三次</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//定义一个枚举类的方法</span>
<span class="token keyword">function</span> <span class="token function">forClass</span><span class="token punctuation">(</span><span class="token parameter">className</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// let arr = [];</span>
  <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">//1.枚举length属性、prototype、name属性、静态方法</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">let</span> key <span class="token keyword">of</span> Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>className<span class="token punctuation">,</span>key<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//2.枚举属性</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">of</span> Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">className</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">className</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>key<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//3.枚举constructor、普通方法</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">of</span> Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>className<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>className<span class="token punctuation">.</span>prototype<span class="token punctuation">,</span>key<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>类的对象: 获取属性</li><li>类的prototype: 获取constructor、普通方法</li><li>类本身: length属性、prototype、name属性、静态方法</li></ul><h2 id="iii-class的继承" tabindex="-1"><a class="header-anchor" href="#iii-class的继承" aria-hidden="true">#</a> Ⅲ. class的继承</h2><p>Class 可以通过extends关键字实现继承。继承一个类，会将该类的所有属性都继承。</p><h4 id="_1-基本语法" tabindex="-1"><a class="header-anchor" href="#_1-基本语法" aria-hidden="true">#</a> 1. 基本语法</h4><p>实质是先将父类实例对象的属性和方法，加到this上面（所以必须先调用super方法），然后再用子类的构造函数修改this。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Father</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Father</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_1-1-super" tabindex="-1"><a class="header-anchor" href="#_1-1-super" aria-hidden="true">#</a> 1.1 super</h5><p>子类必须在constructor方法中调用super方法，否则新建实例时会报错。super方法是用来调用父类的构造函数的，当子类省略constructor时，系统会自动加上constructor并自动调用super方法</p><p>因为子类自己的this对象，必须先通过父类的构造函数完成塑造，得到与父类同样的实例属性和方法，然后再对其进行加工，加上子类自己的实例属性和方法。如果不调用super方法，子类就得不到this对象。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Father</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Father</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_1-2-继承规则" tabindex="-1"><a class="header-anchor" href="#_1-2-继承规则" aria-hidden="true">#</a> 1.2 继承规则</h5><ul><li>super与this: 在子类的构造函数中，只有先调用super之后，才可以使用this关键字，否则会报错。即this赋值必须在调用super方法后面。</li><li>子类的实例：用子类创建的实例，同时是子类和父类两个类的实例（可用instanceof验证）</li><li>静态方法：父类的静态方法，子类也会继承。</li></ul><h4 id="_2-object-getprototypeof" tabindex="-1"><a class="header-anchor" href="#_2-object-getprototypeof" aria-hidden="true">#</a> 2. Object.getPrototypeOf</h4><p>Object.getPrototypeOf方法可以用来从子类上获取父类</p><p>可以使用这个方法判断，一个类是否继承了另一个类</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>Son<span class="token punctuation">)</span> <span class="token operator">===</span> Father<span class="token punctuation">;</span><span class="token comment">//true就表示Son继承了Father</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_3-super关键字" tabindex="-1"><a class="header-anchor" href="#_3-super关键字" aria-hidden="true">#</a> 3. super关键字</h4><p>super关键字，既可以当作函数使用，也可以当作对象使用，共两种用法。</p><h5 id="_3-1-作为函数调用" tabindex="-1"><a class="header-anchor" href="#_3-1-作为函数调用" aria-hidden="true">#</a> 3.1 作为函数调用</h5><p>代表父类的构造函数。ES6 要求，子类的构造函数必须执行一次super函数。</p><p>注意，super虽然代表了父类Father的构造函数，但是返回的是子类Son的实例，即super内部的this指的是Son的实例，因此super()在这里相当于Father.prototype.constructor.call(this)。</p><p>作为函数时，super()只能用在子类的构造函数之中，用在其他地方就会报错。</p><h5 id="_3-2-作为对象时" tabindex="-1"><a class="header-anchor" href="#_3-2-作为对象时" aria-hidden="true">#</a> 3.2 作为对象时</h5><p>super作为对象时，用来调用父类的属性和方法。</p><p>在普通方法中，指向父类的原型对象；在静态方法中，指向父类。</p><p>由于super指向父类的原型对象，所以定义在父类实例上（和类中）的方法或属性，是无法通过super调用的。如果属性定义在父类的原型对象上，super就可以取到。即只能取到定义在父类原型上的属性。Father.prototype.property</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Father</span><span class="token punctuation">{</span>
    stature <span class="token operator">=</span> <span class="token number">180</span><span class="token punctuation">;</span> <span class="token comment">//该属性定义在类中，非原型上</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">//该属性定义在类中，非原型上</span>
    <span class="token punctuation">}</span>    
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">10</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>num <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token comment">//定义在原型上的属性</span>
<span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Father</span><span class="token punctuation">{</span>
    <span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">super</span><span class="token punctuation">.</span>stature<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//undefined</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">super</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//undefined</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">super</span><span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//100,定义在原型上的可以访问</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>stature<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//全都继承了，可访问</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//10,方法不收影响 </span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-3-super在普通方法中" tabindex="-1"><a class="header-anchor" href="#_3-3-super在普通方法中" aria-hidden="true">#</a> 3.3 super在普通方法中</h5><p>在子类普通方法中通过super调用父类的方法时，(父)方法内部的this指向当前的子类实例。</p><p>由于this指向子类实例，所以如果通过super对某个属性赋值，这时super就是this，赋值的属性会变成子类实例的属性。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Father</span><span class="token punctuation">{</span>
  x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
  <span class="token function">p</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Father</span><span class="token punctuation">{</span>
  x <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
  <span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//100</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">p</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//100 ==super.p.call(this)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-4-super在静态方法中" tabindex="-1"><a class="header-anchor" href="#_3-4-super在静态方法中" aria-hidden="true">#</a> 3.4 super在静态方法中</h5><p>如果super作为对象，用在静态方法之中，这时super将指向父类，而不是父类的原型对象。</p><p>在子类的静态方法中通过super调用父类的方法时，方法内部的this指向当前的子类，而不是子类的实例。</p><h5 id="_3-5-对象中的super" tabindex="-1"><a class="header-anchor" href="#_3-5-对象中的super" aria-hidden="true">#</a> 3.5 对象中的super</h5><p>由于对象总是继承其他对象的，所以可以在任意一个对象中，使用super关键字。</p><h4 id="_4-类的prototype属性和-proto-属性" tabindex="-1"><a class="header-anchor" href="#_4-类的prototype属性和-proto-属性" aria-hidden="true">#</a> 4. 类的prototype属性和__proto__属性</h4><p>ES5 实现之中，每一个对象都有__proto__属性，指向对应的构造函数的prototype属性。Class 作为构造函数的语法糖，同时有prototype属性和__proto__属性，因此同时存在两条继承链。</p><h5 id="_4-1-子类的-proto-属性" tabindex="-1"><a class="header-anchor" href="#_4-1-子类的-proto-属性" aria-hidden="true">#</a> 4.1 子类的__proto__属性</h5><p><code>__proto__</code>：本意是构造函数的实例用来访问构造函数的原型对象的。</p><p>在class中，子类的<code>__proto__</code>表示构造函数的继承，指向的是父类。</p><h5 id="_4-2-子类的prototype属性的-proto-属性" tabindex="-1"><a class="header-anchor" href="#_4-2-子类的prototype属性的-proto-属性" aria-hidden="true">#</a> 4.2 子类的prototype属性的__proto__属性</h5><p>prototype：本意是构造函数（类）的原型，他的__proto__本意是构造函数原型的原型。在这里表示方法的继承，即子类对应的父类的原型对象。指向父类的prototype。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Father</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Father</span><span class="token punctuation">{</span>  <span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Son<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> Father<span class="token punctuation">)</span> <span class="token comment">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Son</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">==</span> Father<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token comment">//true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-3-原理" tabindex="-1"><a class="header-anchor" href="#_4-3-原理" aria-hidden="true">#</a> 4.3 原理</h5><p>作为一个对象，子类（Son）的原型（__proto__属性）是父类（Father）；作为一个构造函数，子类（Son）的原型对象（prototype属性）是父类的原型对象（prototype属性）的实例。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Father</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Son</span><span class="token punctuation">{</span><span class="token punctuation">}</span> 

<span class="token comment">//Son继承Father:Son的原型改成Father的原型，Son的实例继承Father的实例</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeof</span><span class="token punctuation">(</span><span class="token class-name">Son</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span><span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">即：Son</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>

<span class="token comment">//Son继承Father的静态属性:Son的原型改成Father本身</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeof</span><span class="token punctuation">(</span>Son<span class="token punctuation">,</span>Father<span class="token punctuation">)</span><span class="token punctuation">;</span>
即：Son<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> Father
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-4-extends后面的值" tabindex="-1"><a class="header-anchor" href="#_4-4-extends后面的值" aria-hidden="true">#</a> 4.4 extends后面的值</h5><p>extends关键字后面可以跟多种类型的值，只有是有prototype属性的函数就可以。即除了Function.prototype函数，所有函数都可以被继承。</p><h4 id="_5-实例的-proto-属性" tabindex="-1"><a class="header-anchor" href="#_5-实例的-proto-属性" aria-hidden="true">#</a> 5. 实例的__proto__属性</h4><p>子类实例的__proto__属性的__proto__属性，指向父类实例的__proto__属性。也就是说，子类的原型的原型，是父类的原型。</p><p>可以通过子类实例的__proto__.__proto__属性，可以修改父类实例的行为。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>son<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> father<span class="token punctuation">.</span>__proto__ <span class="token comment">//true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_6-mixin模式的实现" tabindex="-1"><a class="header-anchor" href="#_6-mixin模式的实现" aria-hidden="true">#</a> 6. Mixin模式的实现</h4><p>Mixin 指的是多个对象合成一个新的对象，新对象具有各个组成成员的接口。</p><p>可以将多个对象合成为一个类。使用的时候，只要继承这个类即可。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">&#39;obj1&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">b</span><span class="token operator">:</span><span class="token string">&#39;obj2&#39;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span>a<span class="token punctuation">,</span><span class="token operator">...</span>b<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">&#39;obj1&#39;</span><span class="token punctuation">,</span><span class="token literal-property property">b</span><span class="token operator">:</span><span class="token string">&#39;obj2&#39;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_6-1-将多个类混入一个类" tabindex="-1"><a class="header-anchor" href="#_6-1-将多个类混入一个类" aria-hidden="true">#</a> 6.1 将多个类混入一个类</h5><p>使用的时候，只要继承这个类即可。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">mix</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>mixins</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//参数，类数组</span>
  <span class="token keyword">class</span> <span class="token class-name">Mix</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> mixin <span class="token keyword">of</span> mixins<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//拷贝实例属性，先把类实例化，因为类的方法是无法枚举的</span>
        <span class="token function">copyProperties</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">mixin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> mixin <span class="token keyword">of</span> mixins<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">copyProperties</span><span class="token punctuation">(</span>Mix<span class="token punctuation">,</span>mixin<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//拷贝静态属性</span>
    <span class="token function">copyProperties</span><span class="token punctuation">(</span><span class="token class-name">Mix</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span>mixin<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//拷贝原型属性</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> Mix<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//复制对象属性的函数，参数：对象或类</span>
<span class="token keyword">function</span> <span class="token function">copyProperties</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span>source</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//遍历要复制的对象(类)自身的所有键名</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">of</span> Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
     <span class="token comment">//排除构造函数，原型和name属性</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>key <span class="token operator">!==</span> <span class="token string">&#39;constructor&#39;</span> <span class="token operator">&amp;&amp;</span> key <span class="token operator">!==</span><span class="token string">&#39;prototype&#39;</span> <span class="token operator">&amp;&amp;</span> key<span class="token operator">!==</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//获取被复制对象的key的描述信息</span>
      <span class="token keyword">let</span> desc <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//进行赋值(创建对象的键)</span>
      Object<span class="token punctuation">.</span><span class="token function">definProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>key<span class="token punctuation">,</span>desc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-子类对父类方法的重写" tabindex="-1"><a class="header-anchor" href="#_7-子类对父类方法的重写" aria-hidden="true">#</a> 7. 子类对父类方法的重写</h4><p>子类定义跟父类相同的方法，父类方法就会被重写，</p><p>使用子类对象掉用该方法时，就是调用的子类的方法，</p><p>重写是完全重写，无法再获取父类的同名方法了，使用super也不行。</p>`,128),o=[e];function c(i,l){return s(),a("div",null,o)}const r=n(t,[["render",c],["__file","3-7.Class.html.vue"]]);export{r as default};
